<html>
<head>
    <link rel="stylesheet" href="styles/taskBase.css">
    <style>*{-webkit-user-select:none;-webkit-user-drag:none;cursor:default}body,html{margin:0;padding:0;overflow:hidden}.d-none{display:none}.ctr{top:50%;left:50%;transform:translate(-50%,-50%)}.ctrx{left:50%;transform:translateX(-50%)}.ctry{top:50%;transform:translateY(-50%)}.container{position:relative;top:50%;left:50%;transform:translate(-50%,-50%)}.o0{opacity:0}.clickthru{pointer-events:none}.abs{position:absolute}.ani05{transition:.5s all}.ani1{transition:1s all}.z1{z-index:1}.z2{z-index:2}.z3{z-index:3}.z4{z-index:4}.z5{z-index:5}</style>
    <style>
        .switch.off {
            transform: scaleY(-1) translateY(-92%);
        }
    </style>
</head>
<body>

<div class="container">
    <img class="abs" src="img/electricity_switches_wiresTop.png" t="-218" l="-84">
    <img class="abs background" src="img/electricity_switches_base.png">

    <img class="switch-shadow abs" src="img/electricity_switches_SwitchShadow.png" t="385" l="41">
    <img class="switch off abs" src="img/electricity_switches_Switch.png" t="338" l="41">
    <img class="led abs" src="img/electricity_switches_led0.png" t="438.5" l="45">

    <img class="switch-shadow abs" src="img/electricity_switches_SwitchShadow.png" t="385" l="138">
    <img class="switch off abs" src="img/electricity_switches_Switch.png" t="338" l="138">
    <img class="led abs" src="img/electricity_switches_led0.png" t="438.5" l="142">

    <img class="switch-shadow abs" src="img/electricity_switches_SwitchShadow.png" t="385" l="235">
    <img class="switch off abs" src="img/electricity_switches_Switch.png" t="338" l="235">
    <img class="led abs" src="img/electricity_switches_led0.png" t="438.5" l="239">

    <img class="switch-shadow abs" src="img/electricity_switches_SwitchShadow.png" t="385" l="332">
    <img class="switch off abs" src="img/electricity_switches_Switch.png" t="338" l="332">
    <img class="led abs" src="img/electricity_switches_led0.png" t="438.5" l="336">

    <img class="switch-shadow abs" src="img/electricity_switches_SwitchShadow.png" t="385" l="429">
    <img class="switch off abs" src="img/electricity_switches_Switch.png" t="338" l="429">
    <img class="led abs" src="img/electricity_switches_led0.png" t="438.5" l="432">
</div>


</body>
<script src="scripts/base.js"></script>
<script>

    var switches = _('switch');
    var leds = _('led');
    var switches_online = 0;



    var idx = 0;
    for (const sw of switches) {
        const _i = idx;
        sw.onclick = function(e) {
            sw.classList.toggle('off');
            var newoff = sw.classList.contains('off');
            leds[_i].src = newoff ? "img/electricity_switches_led0.png" : "img/electricity_switches_led1.png";
            if (!newoff) switches_online++;
            else switches_online--;
            _api.playSound('SabotageSwitch.ogg');
            if (switches_online == 5) {
                _remote.setFixing(true);
            }
        }
        idx++;
    }

    var num_preswitched = Math.floor(Math.random() * 4);
    for (var i = 0; i < num_preswitched; i++)
        switches[Math.floor(Math.random() * switches.length)].onclick();

    function OnLoaded() {}

</script>
</html>
